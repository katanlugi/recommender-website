!function(t){t.fn.rating=function(a){function r(t,a){var r=parseInt(t.val());r||(r=0),a.find("a").removeAttr("class"),a.find("a:lt("+r+")").attr("class","full")}var n=t.extend({rateEnd:function(t){}},a);return this.each(function(){var a=t(this),i=parseInt(a.attr("class").match(/rating\d+/)[0].replace("rating","")),e=t('<ul class="rating"></ul>').insertAfter(a).width(20*i+"px");if(i>0)for(k=0;k<i;k++)e.append('<li><a href="javascript:void(0);" title="'+(k+1)+'">'+(k+1)+"</a></li>");if(a.prop("readonly")){var l=parseInt(a.val());l||(l=0),e.find("a").attr("title",l+" / "+i)}else e.find("a").each(function(i,l){var l=t(l);l.hover(function(){e.find("a").removeAttr("class"),e.find("a:lt("+(i+1)+")").attr("class","hover")},function(){r(a,e)}),l.click(function(){a.val(i+1),r(a,e),n.rateEnd(i+1),t.ajax({url:"rate.php",type:"POST",data:{kurtzel:t("#kurtzel").val(),idItem:a.attr("id")},success:function(t,a,r){},error:function(t,a,r){alert("Oups :-( Try again later...")}})})});r(a,e),a.hide()}),this}}(jQuery);